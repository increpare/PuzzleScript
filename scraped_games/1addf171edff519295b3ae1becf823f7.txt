title Weird Bug
author Jonah Ostroff, ncrecc
text_color #F0F
color_palette amiga
background_color Black 
verbose_logging

========
OBJECTS
========

Goal 
Blue Green
(Finalize graphics below.)
(0: Red, 1: Green, .: Blank)
10.01
0.1.0
.101.
0.1.0
10.01

Player
#F0F #F8F #80F
.1.1.
.000.
10201
.000.
11.11

DeadBug
#D8D #FCF #A5C
.1.1.
.000.
10201
.000.
11.11

Ant
Red #F75
..1..
.101.
..0..
.101.
.....

Background
#0B1104 #101804 #121808 #0D1D06
30222
31100
22223
00111
03330

BGWeb
#F8FFFF
0.0.0
.0.0.
0.0.0
.0.0.
0.0.0

Wall
#BA9 #A98 #876 #987
01203
01201
21210
20113
20213

Pebble
#B84 #642
.111.
10001
10001
10001
.111.

Switch
#555 Yellow
.....
.000.
.010.
.000.
.....

Door
Yellow #A83 #555
22222
21012
20102
21012
22222

Gem
#08F #8FF
..0..
.010.
01110
.010.
..0..

GemReceptacle
#08F #8FF
01.10
1...1
.....
1...1
01.10

Temp
White
.....
.....
.....
.....
.....

False
#BA9 #A98 #876 #987
01203
01201
21210
20113
20213

FGWeb (hack, oh nooo)
White
0.0.0
.0.0.
0.0.0
.0.0.
0.0.0

Escape (aaaaaaaaa)
Transparent

=======
LEGEND
=======

Web = BGWeb or FGWeb
Blockable = Player or Pebble or Web or Ant or Gem or Switch (Objects that can be moved around and shouldn't overlap a wall except when they should.)
Blocking = Door or Wall (Objects that block movement.)
Weight = Pebble or Gem or Wall (Objects that... uh, i dunno what these count as now that switches aren't things you place objects on top of.)
Crusher = Pebble or Wall (Gems and player can't crush!)
Sticky = Pebble or Ant or Gem or Wall or Switch (Objects that stick to webs.)
Pushable = Pebble or Ant or Gem or Switch or DeadBug (Objects that can be pushed.)
Weak = Switch or Ant (Objects that can be crushed.)
Thing = Blockable or Blocking (Things.)
PushableNotWeak = Pebble or Gem or DeadBug (Self-explanatory.)

(Character equivalences for level creation.)
@ = Player
. = Background
# = Wall
* = Pebble
O = Pebble and BGWeb
~ = BGWeb
+ = Door
! = Switch
G = Goal
A = Ant
? = Gem
/ = FGWeb and Wall
| = Switch and BGWeb
$ = GemReceptacle

=======
SOUNDS
=======

Pushable Move 80095707
Sfx1 73155703 (Web creation sound.)
Sfx2 56169902 (Web destruction sound.)
Sfx3 15943302 (Door open sound. Pretty awful; generate new sounds with black-and-white buttons to the right.) (Jonah insulted my door open sound! I bet he hasn't even listened to it yet)
Sfx4 85050702 (Death sound.)
Sfx5 76569702 (Something vanishes into the regions unknown.)
EndLevel 47272300
Weak destroy 60499701

================
COLLISIONLAYERS
================

Background (Background.)
Goal False GemReceptacle (Level features you can step on. Also contains false wall for gem.)
BGWeb (Webbing only.)
Door Wall Player Pebble Ant Gem DeadBug Switch (Foreground: yourself, and other things you cannot step on.)
FGWeb
Temp (Invisible technical stuff for unlocking doors.)
Escape

======
RULES
======
(There are no bugs in this section, but the magic gem rules are missing, so you should add those somewhere.)

(HEY WAIT THERES A BUG)







()
(PUSHING A WEBBED MAGIC GEM OFF-BORDER PUSHES THE WEB OFF RATHER THAN THE GEM)
()






(THANK YOU)

[Deadbug] -> [action Deadbug]
[Player] [action deadbug] -> [player] [deadbug]
[action deadbug] -> cancel

(Player creates or destroys webs by pressing Action.)
[Action Player no Web] -> [Player BGWeb] Sfx1
[Action Player Web] -> [Player] Sfx2

(Player pushes pushable objects.)
[> Player | Pushable] -> [> Player | > Pushable]

(Code for propagating movement between webs and pushed objects. The + signs indicate that these rules are "grouped": they'll all keep happening, even out of order, until none of them can happen anymore. That means you can transfer movement from one pebble to another pebble, then from the second pebble to a web, then from that web to some adjacent web, then from THAT web to another pebble, etc.)
[> Sticky Web] -> [> Sticky > Web]
+[> Web Sticky] -> [> Web > Sticky]
(+[> Weak no Web|stationary Pushable no Weak] -> Cancel
+[> Weak Web|stationary Pushable no Weak no Web] -> Cancel)
(if some weird ridiculous bug ever comes up regarding pushable objects pushing pushable objects & webs being webby, move these comments, kthxbye)
+[> Pushable|Pushable] -> [> Pushable|> Pushable]
+[Moving Web|Web] -> [Moving Web|Moving Web]

[> Gem Web|Wall Web] -> [> Gem Web|> Wall Web]
[> Gem|stationary Wall] -> [> Gem|False]

[> Crusher|...|> Weak Web|Weak|Wall] -> Cancel (can't smoosh a weak thing with a reinforced weak thing! which is dumb... and stupid... and why did i make this a thing... but whatever!)
[> Crusher|...|> Weak no Web|Blocking]  -> [> Crusher|...||Blocking] (this being weird weird bug, a lot of the mechanics are inspired by bugs i didn't bother fixing. i don't remember whether switches not being crushable against doors was one.)
[> Crusher|...|> Weak no Web|> Crusher > Web|Blocking]  -> [> Crusher|...||Crusher Web|Blocking]
[> Crusher|...|> Weak no Web|> Crusher|Blocking]  -> [> Crusher|...||Crusher|Blocking]

(If a moving object hits an immovable object, cancel all movement.)
[> Crusher|Weak no Web|stationary Crusher] -> [> Crusher|Weak no Web|stationary Crusher Temp]
[> Blockable|Blocking no Web no Temp] -> Cancel
[> Weak Web|PushableNotWeak no Web] -> cancel
[> Weak no Web|PushableNotWeak Web] -> cancel
[> Weak no Web|PushableNotWeak no Web] -> cancel

[temp] -> []

(At end of turn, should we open doors? Put "Temp" on each door, then remove "Temp" if some switch is uncovered, then delete all switches and doors if Temp still remains.)
late[Door] -> [Temp Door]
late[Switch no Weight][Temp Door] -> [Switch][Door]
late[Temp Door][Switch] -> [Temp Door][]
late[Temp Door] -> [] Sfx3
(this is my favorite joke in my whole solution - the switch code is completely untouched)

(At end of turn, kill player if adjacent to ant.)
late[Player|Ant] -> [DeadBug|Ant] Sfx4
late [DeadBug] [Goal] -> [DeadBug] [Goal Temp]

late [False no Player no Pushable no DeadBug BGWeb] -> [Wall FGWeb]
late [False no Player no Pushable no DeadBug] -> [Wall]

(Objects moving past the border vanish into the unknown and are never seen again. Here the border is defined as when [>Thing|] fails.)
[|> Thing] -> [> Background|> Thing]
[> Background|> Thing|] -> [Background|> Thing|]

[> Background|> Player False Web] -> [Background|] Sfx5
[> Background|> Wall > FGWeb] -> [Background|] Sfx5
[> Background|> Pushable > BGWeb] -> [Background|] Sfx5
[> Background|> Thing] -> [Background|] Sfx5

==============
WINCONDITIONS
==============

All Player on Goal
No Temp on Goal
(if we tie the win condition to *just* "no deadbug" it will still win if we die after pushing a magic gem. has to do with some weird ps bug relating to wincon checks being mangled when a tile has no background on it. i think.)
no deadbug
all GemReceptacle on Gem

=======
LEVELS
=======

(Helpful reminder: you can command-click any level in the editor to immediately skip to that level.)

Message Please fix any bugs you find with the HACK link at the bottom of the page. Thank you so much!
(Remove this message after bugs have been fixed.)

Message Make your way to the goal (the blue and green thing).

#####################
#@#.#...............#
#.#...#######.#.###.#
#.###.#.....#.#.#.#.#
#..#..#.#.#.#.#.#.#.#
#*.##.#.#.#.......#.#
#..#..######.#.####.#
#.###.#...#..#....#.#
#.#...#.#.####.#.##.#
#...#.#.#......#.G#.#
#####################

Message Weigh down switches to open doors.

(this and the switch code being untampered joke might be my favorite thing about weird weird bug. the way the level is designed, naturally, the first thing you do is push the crate onto the target, but in weird weird bug that then makes you go WAIT WHAT WHY IS THIS WHAT HUH WHAT HUHH and then you keep pushing right anyways, hopefully, and then you win.)

############
#...!..!...#
#..........#
##*##..##+##
#...#..#...#
#.@.#..#.G.#
#...#..#...#
############

Message Webs stick to pebbles.

###########
#.......###
#...!..*###
###....~~O#
#G+.@.....#
###.......#
#...!.!.###
#.......###
###########

(for a while pebbles couldn't crush switches on other pebbles. i don't know why i this insisted this be a thing.)

message Switches can push other switches, but cannot crush them.

#########
#....*..#
#.!...!.#
#...@..*#
#.......#
##+#..!.#
#G.#....#
#########

Message Oh, did I mention you can press X to create or remove webs?

#########
#.#.....#
#.##O!!.#
#@.O.!!.# (Not sure where the player should start.)
#.##*.#+# (Yeah me neither Jonah.)
#.#...#G#
#########

##############
#...##########
#...*.....!#G#
#.#.#.#..#.#+#
#...........!#
#.#..#.#.#.#.# (Missing goal.)
#...@........#
#.#.#.#.#.#..#
#*!..........#
##############

(do a level that introduces webbed switches being uncrushable. maybe this?)

message wip level!

#######..
#.....#..
#.@.*.###
#..!..+g#
#.*.!.###
#....!#..
#######..

Message Don't touch fire ants!

#########
#.....#G#
#.!.*.#+#
#..@..#.#
#.!.!.#.#
#.....A.#
#########

(Difficulty ramps up pretty quickly here. Maybe another level in between these two?)

###########
#.....#...#
#.*.@.+.G.#
#.....#...#
#.*.#######
#...AAAAAA#
##.......|.
##AAAAAAAA#
###########

Message Use the magic gem to get past the ants!

#############
#.....#.#.#G#
#.###.#.#.#.#
#.#.....A.A.#
#.###########
#...........#
#.#.#.#.#.#.#
#....@.?....#
#.#.#.#.#.#.#
#...........#
#############

Message ...

Message Well, you got past the ants.

Message So I'll give you that.
(
Message Now try it again.

!+++++++++++!
+.....#.#.#g+
+.###.#.#.#.+
+.#.....a.a.+
+.##########+
+...........+
+.#.#.#.#.#.+
+....@.?....+
+.#.#.#.#.#.+
+...........+
!+++++++++++!

no idea how to solve this and also it's super obnoxious
)
(easy, early version of the below
...A.A...
####.####
#...!...#
#.!.*.!.#
#.......#
#..#+#@.#
#.!#.#!.#
####/####
)
...a.a.
####.##
#...!.#
#.!.*@#
#..#+##
#..#.#.
#.!#.#.
####/#.

(just doesn't work
#############
#G.A..#...+?#
###.###!*.#+#
#!#.........#
#.#####...@!#
#*..........#
#############
)
(this doesn't work either
///////////////
/#############/
/#...*.#...+?#/
./##.#.#!*.#+#/
../#.........#/
..g/##.....@!#/
..../##......#/
...../########/
....../////////
)


...$?$...
..@#?#...
...#?#...
...$?$...



(Needs one more final level to really show off the magic gem mechanics?)

Message You win! Thanks for all your help!

(Once you've made all the necessary changes, send me your fixed version!)

(Email to [firstname].[lastname][classified punctuation]gmail.com)

message debug

////
/?@/
////

....////
..../?@/
....////

#######
#.....#
#@..*.#
#..!~.#
#..!~.#
#...*.#
#.....#
#######

##########
#........#
#..?.....#
#.@..|...#
#..?.....#
#...##...#
#........#
#......#+#
#......+g#
##########