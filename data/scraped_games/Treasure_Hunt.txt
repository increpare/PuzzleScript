title Treasure Hunt
author jcGyo
homepage www.puzzlescript.net
norepeat_action
flickscreen 12x7
run_rules_on_level_start

========
OBJECTS
========

Background
LIGHTGREEN GREEN
11111
01111
11101
11111
10111

Wall
BROWN DARKBROWN
00010
11111
01000
11111
00010

PlayerU
darkgreen orange Brown White
.222.
12221
10001
.000.
.2.2.

PlayerD
darkgreen orange Brown White
.222.
13131
10001
.000.
.2.2.

PlayerL
darkgreen orange Brown White
.222.
.312.
.010.
.000.
..22.

PlayerR
darkgreen orange Brown White
.222.
.213.
.010.
.000.
.22..

PlayerGU
darkgreen orange Brown White
12221
12221
10001
.000.
.2.2.

PlayerGD
darkgreen orange Brown White
.222.
.313.
10001
10001
12.21

PlayerGL
darkgreen orange Brown White
.222.
.322.
1110.
.000.
..22.

PlayerGR
darkgreen orange Brown White
.222.
.223.
.0111
.000.
.22..

UngrabbedCrate
Orange Yellow
00000
0...0
0...0
0...0
00000

GrabbedCrate
Orange Yellow
00000
0...0
0...0
0...0
00000

moveMarker
transparent

moves0
transparent

moves1
transparent

moves2
transparent

moves3
transparent

moves4
transparent

moves5
transparent

moves6
transparent

moves7
transparent

Strength0
transparent

Strength1
transparent

Strength2
transparent

Strength3
transparent

Strength4
transparent

Strength5
transparent

Strength6
transparent

Strength7
transparent

PullMarker
transparent

StrengthBracelet
yellow red
.010.
0...0
1...1
0...0
.010.

GripBracelet
yellow blue
.010.
0...0
1...1
0...0
.010.

EndingMarker
transparent

tile000
#F5989D 
00000
00000
00000
00000
00000


tile001
#F5989D #FFF200 #C0A000 #ED1C24 #F26D7D #E37C29 #FFF799 
00346
01330
01000
11005
20055


tile002
#FFF799 #F5989D #E37C29 #AB5217 #FFF200 
00000
11114
22214
22234
22233


tile003
#F5989D #AB5217 #E37C29 #F26D7D #BB5D2E #FFF200 
00004
00004
12200
22233
22335


tile004
#BB5D2E #FFF200 #F26D7D #8D3E1A #E37C29 
03444
00444
01444
13444
22444


tile005
#E37C29 #EBEBEB #C0A000 #D7D7D7 #BB5D2E 
00440
00044
00000
13131
22222


tile006
#E37C29 #D7D7D7 #C0A000 #EBEBEB 
00000
00000
00000
13130
22220


tile007
#E37C29 #8D3E1A #FFF200 #F5989D 
00001
00002
00001
00003
00003


tile008
#BB5D2E #FFF200 #F5989D #F26D7D #FFF79D 
00333
00224
12224
21442
21224


tile009
#F5989D #FFF79D #F26D7D 
00000
00000
00000
11002
00222


tile010
#F5989D #F26D7D #FFF79D 
00000
00011
01112
11000
00001


tile011
#F26D7D #F5989D #FFF799 #FFF79D 
00110
01301
12031
00311
01111


tile012
#F26D7D #FFF799 
00000
00000
00010
00000
00010


tile013
#C0A000 #F26D7D #AB5217 #E37C29 
01233
01233
00223
10222
11112


tile014
#E37C29 #AB5217 #FFF200 
00000
00000
00000
10000
11102


tile015
#E37C29 #3CB878 #C0A000 #F26D7D #FFF799 #FFF200 #F5989D #30484E #C1A100 
03335
03338
04668
15077
20007


tile016
#C1A100 #FFF200 #30484E #F26D7D #AB5217 #E37C29 
03451
11441
22041
02021
20222


tile017
#C0A000 #BB5D2E #FFF200 #EBEBEB #E37C29 #FFF799 #D7D7D7 #ED1C24 #F26D7D 
03636
14444
14444
24444
25785


tile018
#EBEBEB #E37C29 #FFF799 #FFF200 #D7D7D7 #BB5D2E #C0A000 #24302D #30484E 
04061
11651
13351
22518
35578


tile019
#E37C29 #AB5217 #30484E #C1A100 #FFF200 
00003
00114
11122
22232
22223


tile020
#FFF200 #C1A100 #30484E #F5989D #E37C29 #FFF79D 
03335
12222
12222
14444
24444


tile021
#F26D7D #30484E #FFF200 #E37C29 #FFF799 #F5989D #AB5217 
00055
11335
13333
24333
32463


tile022
#F5989D #E37C29 #F26D7D #AB5217 
00022
00220
12200
11000
13000


tile023
#F5989D #FFF79D #F26D7D 
00100
00000
00002
00022
00220


tile024
#FFF799 #F26D7D 
01010
11101
11111
11101
11111


tile025
#F26D7D #F5989D #FFF799 
02000
00000
00001
00111
11111


tile026
#F26D7D #F5989D #BB5D2E #AB5217 #FFF799 #C0A000 #BE602D #FFF200 #2D7A45 #3CB878 
03358
11163
11223
11222
22479


tile027
#AB5217 #FFF200 #BE602D #C0A000 #E37C29 #FFF799 #448CCB 
00415
00114
03304
13006
20036


tile028
#30484E #E37C29 #6DCFF6 #448CCB #FFF200 #FFF799 
00000
11000
14500
21110
31150


tile029
#24302D #30484E #BB5D2E 
01122
01111
10000
11111
11111


tile030
#BB5D2E #30484E #24302D 
00221
12211
22111
11111
11111


tile031
#30484E #E37C29 #FFF200 #FFF799 
00000
00011
00011
00023
00111


tile032
#30484E #E37C29 #FFF799 #FFF200 #ED1C24 #F26D7D #AB5217 
03211
11326
11132
21113
34511


tile033
#E37C29 #AB5217 #FFF200 #448CCB #6DCFF6 #C0A000 
00341
00331
10055
21155
21115


tile034
#AB5217 #F5989D #FFF79D #FFF799 
00011
00011
00012
00011
00113


tile035
#F5989D #F26D7D 
00110
01110
01100
11100
11000


tile036
#F26D7D #F5989D 
00011
01111
11111
11111
11111


tile037
#F5989D #BB5D2E 
00001
00001
00001
00000
00111


tile038
#BB5D2E #FFF799 #FFF200 #8D3E1A #C0A000 
00002
00003
00033
12333
02443


tile039
#C0A000 #2D7A45 #8D3E1A #AB5217 #8F3F1A #F26D7D #202926 
03003
14333
01330
20463
22533


tile040
#E37C29 #C0A000 #AB5217 #FFF200 #FFF799 
00300
03004
12033
20320
21200


tile041
#24302D #E37C29 #FFF200 #30484E #FFF799 
03333
11333
11033
14113
21111


tile042
#30484E #24302D #E37C29 #FFF200 #FFF799 
00000
00002
00002
02234
12223


tile043
#30484E #E37C29 #FFF799 #FFF200 #AB5217 #3CB878 
00111
13511
11324
11153
24113


tile044
#E37C29 #AB5217 #2D7A45 #ED1C24 #FFF200 #C0A000 #24302D 
03311
00441
00051
10151
21156


tile045
#C0A000 #AB5217 #24302D #30484E #F5989D 
00111
10111
11224
11234
12334


tile046
#F5989D #F26D7D #FFF79D #FFF799 
02031
00013
00111
01113
11110


tile047
#FFF799 #F26D7D #F5989D #FFF79D 
01322
12222
22222
22222
22222


tile048
#F5989D #F26D7D 
00000
00000
00001
00111
11111


tile049
#F5989D #F26D7D #BB5D2E #FFF799 #FFF200 
02222
02222
12234
11122
11222


tile050
#BB5D2E #448CCB #FFF200 #8D3E1A #C0A000 #F5989D 
00344
00333
12445
00333
00333


tile051
#8D3E1A #F26D7D #F5989D #AB5217 #202926 
00133
12244
22244
22244
22222


tile052
#C0A000 #AB5217 #202926 #E37C29 #448CCB 
01134
11334
11101
11101
21011


tile053
#6DCFF6 #448CCB #E37C29 #AB5217 #FFF200 #FFF799 
02222
12255
22242
22432
33432


tile054
#24302D #E37C29 #FFF799 #FFF200 #AB5217 
01111
12111
13241
14334
11433


tile055
#FFF200 #E37C29 #AB5217 #C0A000 #202926 
00211
10022
11322
12322
22242


tile056
#C0A000 #AB5217 #202926 #24302D #30484E 
01113
01113
12334
12344
12444


tile057
#24302D #30484E #F26D7D 
01112
11112
11112
11112
11112


tile058
#F26D7D #FFF79D #F5989D 
00022
00022
00022
00122
00222


tile059
#F5989D 
00000
00000
00000
00000
00000


tile060
#F26D7D 
00000
00000
00000
00000
00000


tile061
#F26D7D #BB5D2E #F5989D #FFF799 
00111
00111
00000
00032
00222


tile062
#BB5D2E #FFF799 #F5989D #ED1C24 #F26D7D #BE602D #C0A000 #8D3E1A #3CB878 
03366
14307
00007
00008
25010


tile063
#F5989D #8D3E1A #C0A000 #BB5D2E #2D7A45 #F26D7D 
00000
11000
24000
11100
31205


tile064
#202926 #F5989D #F26D7D #24302D #AB5217 
00044
00044
10000
23300
23330


tile065
#AB5217 #202926 #C0A000 #E37C29 
02203
02003
11000
11000
11000


tile066
#E37C29 #AB5217 #C0A000 #954714 
00012
00012
11111
11111
11113


tile067
#AB5217 #202926 #24302D 
00011
00011
10012
11122
11222


tile068
#202926 #24302D #30484E 
02222
11222
11122
11122
11112


tile069
#30484E #F26D7D 
00001
00001
00011
00011
00011


tile070
#F26D7D #FFF799 #F5989D #FFF79D 
02322
13233
22322
22322
22222


tile071
#F5989D #F26D7D 
00001
00001
00011
00011
00011


tile072
#F26D7D #F5989D 
00000
00000
00011
00111
11111


tile073
#F26D7D #FFF79D #F5989D 
02212
12121
22212
22222
22212


tile074
#F5989D #FFF79D #F26D7D #BB5D2E 
00033
01003
00000
00022
00222


tile075
#BB5D2E #FFF799 #F26D7D #448CCB #8D3E1A #C0A000 #B21315 
03444
10445
20464
22544
22044


tile076
#F26D7D #8D3E1A #24302D 
02222
12222
12222
12222
12222


tile077
#24302D #202926 #AB5217 
01122
00011
00001
00000
00000


tile078
#AB5217 #202926 #24302D 
00001
00111
11222
22222
22222


tile079
#202926 #24302D 
01111
01111
11111
11111
11111


tile080
#24302D #30484E 
00001
00001
00001
00001
00001


tile081
#30484E #F26D7D #F5989D 
00012
00012
00122
00122
00222


tile082
#F5989D #FFF79D 
00100
00000
00000
00000
00000


tile083
#F5989D #F26D7D 
00111
00111
01111
01111
11111



=======
LEGEND
=======

. = Background
# = Wall
P = PlayerD and Strength0
* = UngrabbedCrate
O = StrengthBracelet
0 = GripBracelet
E = EndingMarker and PlayerD

Crate = UngrabbedCrate or GrabbedCrate

PlayerGrabH = PlayerGL or PlayerGR
PlayerGrabV = PlayerGU or PlayerGD

PlayerGrab = PlayerGU or PlayerGD or PlayerGL or PlayerGR
PlayerNoGrab = PlayerU or PlayerD or PlayerL or PlayerR
Player = PlayerGrab or PlayerNoGrab

moveCounter = moves0 or moves1 or moves2 or moves3 or moves4 or moves5 or moves6 or moves7

StrengthMarker = Strength0 or Strength1 or Strength2 or Strength3 or Strength4 or Strength5 or Strength6 or Strength7

WeakerThan1 = Strength0

WeakerThan2 = Strength0 or Strength1

WeakerThan3 = Strength0 or Strength1 or Strength2

WeakerThan4 = Strength0 or Strength1 or Strength2 or Strength3

WeakerThan5 = Strength0 or Strength1 or Strength2 or Strength3 or Strength4

WeakerThan6 = Strength0 or Strength1 or Strength2 or Strength3 or Strength4 or Strength5

WeakerThan7 = Strength0 or Strength1 or Strength2 or Strength3 or Strength4 or Strength5 or Strength6



Bracelet = StrengthBracelet or GripBracelet

Pushable = Bracelet or Crate

EndingScreen = tile000 or tile001 or tile002 or tile003 or tile004 or tile005 or tile006 or tile007 or tile008 or tile009 or tile010 or tile011 or tile012 or tile013 or tile014 or tile015 or tile016 or tile017 or tile018 or tile019 or tile020 or tile021 or tile022 or tile023 or tile024 or tile025 or tile026 or tile027 or tile028 or tile029 or tile030 or tile031 or tile032 or tile033 or tile034 or tile035 or tile036 or tile037 or tile038 or tile039 or tile040 or tile041 or tile042 or tile043 or tile044 or tile045 or tile046 or tile047 or tile048 or tile049 or tile050 or tile051 or tile052 or tile053 or tile054 or tile055 or tile056 or tile057 or tile058 or tile059 or tile060 or tile061 or tile062 or tile063 or tile064 or tile065 or tile066 or tile067 or tile068 or tile069 or tile070 or tile071 or tile072 or tile073 or tile074 or tile075 or tile076 or tile077 or tile078 or tile079 or tile080 or tile081 or tile082 or tile083

=======
SOUNDS
=======

Crate MOVE 36772507

Bracelet DESTROY 60289100

================
COLLISIONLAYERS
================
Background
EndingMarker
Player, Wall, Crate, Bracelet
moveMarker
moveCounter
StrengthMarker
PullMarker
EndingScreen
======
RULES
======

(Change player sprite direction)
[UP    PlayerNoGrab] -> [UP    PlayerU]
[DOWN  PlayerNoGrab] -> [DOWN  PlayerD]
[LEFT  PlayerNoGrab] -> [LEFT  PlayerL]
[RIGHT PlayerNoGrab] -> [RIGHT PlayerR]

(Push Crates)
[> Player|Crate] -> [> Player|> Crate]

(Grab Crates)
UP    [Action PlayerU PullMarker|UngrabbedCrate] -> [PlayerGU PullMarker|GrabbedCrate]
DOWN  [Action PlayerD PullMarker|UngrabbedCrate] -> [PlayerGD PullMarker|GrabbedCrate]
LEFT  [Action PlayerL PullMarker|UngrabbedCrate] -> [PlayerGL PullMarker|GrabbedCrate]
RIGHT [Action PlayerR PullMarker|UngrabbedCrate] -> [PlayerGR PullMarker|GrabbedCrate]

(Ungrab Crates)
[Action PlayerGU|GrabbedCrate]->[PlayerU|UngrabbedCrate]
[Action PlayerGR|GrabbedCrate]->[PlayerR|UngrabbedCrate]
[Action PlayerGD|GrabbedCrate]->[PlayerD|UngrabbedCrate]
[Action PlayerGL|GrabbedCrate]->[PlayerL|UngrabbedCrate]

(Pull Crates)
UP    [< PlayerGU|Crate] -> [< PlayerGU|< Crate]
DOWN  [< PlayerGD|Crate] -> [< PlayerGD|< Crate]
LEFT  [< PlayerGL|Crate] -> [< PlayerGL|< Crate]
RIGHT [< PlayerGR|Crate] -> [< PlayerGR|< Crate]

(Lateral Pulls)
UP    [horizontal PlayerGU | Crate ] -> [ horizontal PlayerGU | horizontal Crate]
DOWN  [horizontal PlayerGD | Crate ] -> [ horizontal PlayerGD | horizontal Crate]
LEFT  [vertical   PlayerGL | Crate ] -> [ vertical   PlayerGL | vertical   Crate]
RIGHT [vertical   PlayerGR | Crate ] -> [ vertical   PlayerGR | vertical   Crate]

[> Pushable|Pushable] -> [> Pushable|> Pushable]

[moving Pushable no moveMarker] -> [moving Pushable moveMarker]

[Player no moveCounter] -> [Player moves0]

[moveMarker] [moves0] -> [] [moves1]
[moveMarker] [moves1] -> [] [moves2]
[moveMarker] [moves2] -> [] [moves3]
[moveMarker] [moves3] -> [] [moves4]
[moveMarker] [moves4] -> [] [moves5]
[moveMarker] [moves5] -> [] [moves6]
[moveMarker] [moves6] -> [] [moves7]

[WeakerThan1] [moves1] [moving Player] -> [WeakerThan1] [moves1] [Player]
[WeakerThan1] [moves1] [moving Pushable]  -> [WeakerThan1] [moves1] [Pushable]

[WeakerThan2] [moves2] [moving Player] -> [WeakerThan2] [moves2] [Player]
[WeakerThan2] [moves2] [moving Pushable]  -> [WeakerThan2] [moves2] [Pushable]

[WeakerThan3] [moves3] [moving Player] -> [WeakerThan3] [moves3] [Player]
[WeakerThan3] [moves3] [moving Pushable]  -> [WeakerThan3] [moves3] [Pushable]

[WeakerThan4] [moves4] [moving Player] -> [WeakerThan4] [moves4] [Player]
[WeakerThan4] [moves4] [moving Pushable]  -> [WeakerThan4] [moves4] [Pushable]

[WeakerThan5] [moves5] [moving Player] -> [WeakerThan5] [moves5] [Player]
[WeakerThan5] [moves5] [moving Pushable]  -> [WeakerThan5] [moves5] [Pushable]

[WeakerThan6] [moves6] [moving Player] ->  [WeakerThan6] [moves6] [Player]
[WeakerThan6] [moves6] [moving Pushable] ->[WeakerThan6] [moves6] [Pushable]

[WeakerThan7] [moves7] [moving Player] ->  [WeakerThan7] [moves7] [Player]
[WeakerThan7] [moves7] [moving Pushable] ->[WeakerThan7] [moves7] [Pushable]

[moveMarker] -> []
[moveCounter] -> []

[> Player Strength0|StrengthBracelet] -> [|Player Strength1] checkpoint message A bracelet of Strength!  Now I can push boxes!
[> Player Strength1|StrengthBracelet] -> [|Player Strength2] checkpoint message Another one!  I'm getting stronger!
[> Player Strength2|StrengthBracelet] -> [|Player Strength3] checkpoint message A third strength bracelet?
[> Player Strength3|StrengthBracelet] -> [|Player Strength4] checkpoint message How many of these are there?
[> Player Strength4|StrengthBracelet] -> [|Player Strength5] checkpoint message Another strength Bracelet?
[> Player Strength5|StrengthBracelet] -> [|Player Strength6] checkpoint message Who doesn't want more strength?
[> Player Strength6|StrengthBracelet] -> [|Player Strength7] checkpoint message I do love bracelets
[> Player Strength7|StrengthBracelet] -> win

[> Player|GripBracelet] -> [|Player PullMarker] checkpoint message A grip bracelet!  Now I can press x to pull boxes!


(Disallow implicit ungrabs)
LATE UP    [PlayerGU|no GrabbedCrate] -> cancel
LATE DOWN  [PlayerGD|no GrabbedCrate] -> cancel
LATE LEFT  [PlayerGL|no GrabbedCrate] -> cancel
LATE RIGHT [PlayerGR|no GrabbedCrate] -> cancel

LATE [Player no StrengthMarker] [StrengthMarker] -> [Player StrengthMarker] []

LATE [Player no PullMarker] [PullMarker] -> [Player PullMarker] []

(Ending Screen)

DOWN[EndingMarker||||||] -> [EndingMarker Tile000|Tile012|Tile024|Tile036|Tile048|Tile060|Tile072]
RIGHT[Tile000|||||||||||] -> [Tile000|Tile001|Tile002|Tile003|Tile004|Tile005|Tile006|Tile007|Tile008|Tile009|Tile010|Tile011]
RIGHT[Tile012|||||||||||] -> [Tile012|Tile013|Tile014|Tile015|Tile016|Tile017|Tile018|Tile019|Tile020|Tile021|Tile022|Tile023]
RIGHT[Tile024|||||||||||] -> [Tile024|Tile025|Tile026|Tile027|Tile028|Tile029|Tile030|Tile031|Tile032|Tile033|Tile034|Tile035]
RIGHT[Tile036|||||||||||] -> [Tile036|Tile037|Tile038|Tile039|Tile040|Tile041|Tile042|Tile043|Tile044|Tile045|Tile046|Tile047]
RIGHT[Tile048|||||||||||] -> [Tile048|Tile049|Tile050|Tile051|Tile052|Tile053|Tile054|Tile055|Tile056|Tile057|Tile058|Tile059]
RIGHT[Tile060|||||||||||] -> [Tile060|Tile061|Tile062|Tile063|Tile064|Tile065|Tile066|Tile067|Tile068|Tile069|Tile070|Tile071]
RIGHT[Tile072|||||||||||] -> [Tile072|Tile073|Tile074|Tile075|Tile076|Tile077|Tile078|Tile079|Tile080|Tile081|Tile082|Tile083]

[action Player] [EndingMarker] -> [Player] [] message You look extremely silly!

[action Player] [Tile000 no EndingMarker] -> [Player] [Tile000] win

==============
WINCONDITIONS
==============

=======
LEVELS
=======

####################################
#*..*..**.*##############.***.***.*#
#.*.****.*.##############*.*.*.*.*.#
#..*.*.***........###.....*.*.*.*O*#
#.***..**.*######.....###***.*.*.*.#
#0*.**.*..*######.#######.*.***.***#
#################.##################
#################.##################
#.*..############.#######....#.....#
#*#*.O***#.............##.##.#.###.#
#O#*#*#.*#.##..............#...#...#
#*.*#.**.#.##.P........###.#####.O.#
#.#*#***...##..........##.*........#
####################.###############
####################.#####...O######
#...O.....####..*****#####.#########
#...#.#############.######.#########
#...#.O.............*******........#
#...################################
#........O##########################
####################################

message You found all the bracelets!

E...........
............
............
............
............
............
............

message The End