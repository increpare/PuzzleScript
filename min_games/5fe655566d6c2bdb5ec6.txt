title Wizard School!
author Luke Davies
homepage twitter.com/lefishy
again_interval 0.01
norepeat_action

OBJECTS

playeridle
darkblue brown
..0..
.000.
.000.
01110
.0.0

playercarrying
darkblue brown
1.0..
1000.
1000.
00000
.0.0

boxidle
brown darkbrown lightbrown
11111
12001
10201
10021
1111

boxsummoned
brown darkbrown purple
.....
.111.
.121.
.111.
....

boxcarried
brown darkbrown lightbrown purple
11111
12331
13231
13321
1111

boxthrownup
brown darkbrown purple
.111.
.101.
.111.
.222.
..2.

boxthrowndown
brown darkbrown purple
..2..
.222.
.111.
.101.
.111

boxthrownleft
brown darkbrown purple
.....
1112.
10122
1112.
....

boxthrownright
brown darkbrown purple
.....
.2111
22101
.2111
....

plainwall
grey darkgrey
00100
11111
10000
11111
0010

background
yellow

castup
transparent

castdown
transparent

castleft
transparent

castright
transparent

target
darkred black
..1..
.101.
10001
.101.
..1.

door
white


LEGEND

p = playeridle
b = boxidle
# = plainwall
. = background
t = target
@ = boxidle or target
d = door
wall = plainwall
player = playeridle or playercarrying
box = boxidle or boxsummoned or boxcarried
magic = castup or castdown or castleft or castright
blocker = wall or box
boxthrown = boxthrownup or boxthrowndown or boxthrownleft or boxthrownright

COLLISIONLAYERS

background
target
wall, player, box, magic, boxthrown, door

RULES

up [ actionplayeridle | noblocker ] -> [ actionplayeridle | castup ] againdown [ actionplayeridle | noblocker ] -> [ actionplayeridle | castdown ] againleft [ actionplayeridle | noblocker ] -> [ actionplayeridle | castleft ] againright [ actionplayeridle | noblocker ] -> [ actionplayeridle | castright ] again[ actionplayeridle | boxidle ] -> [ actionplayeridle | boxcarried ] againup [ castup | boxidle ] -> [  | boxsummoned ] againdown [ castdown | boxidle ] -> [  | boxsummoned ] againleft [ castleft | boxidle ] -> [  | boxsummoned ] againright [ castright | boxidle ] -> [  | boxsummoned ] againup [ castup | nowall ] -> [ > castup |  ] againdown [ castdown | nowall ] -> [ > castdown |  ] againleft [ castleft | nowall ] -> [ > castleft |  ] againright [ castright | nowall ] -> [ > castright |  ] againup [ castup | wall ] -> [  | wall ] againdown [ castdown | wall ] -> [  | wall ] againleft [ castleft | wall ] -> [  | wall ] againright [ castright | wall ] -> [  | wall ] again[ boxsummoned | ... | player ] -> [ > boxsummoned | ... | player ] again[ > boxsummoned | player ] -> [ boxcarried | player ] againrigid [ movingplayer | boxcarried ] -> [ movingplayer | movingboxcarried ][ > boxcarried | wall ] -> cancelup [ actionplayercarrying | boxcarried ] -> [ actionplayercarrying | boxthrownup ] againdown [ actionplayercarrying | boxcarried ] -> [ actionplayercarrying | boxthrowndown ] againleft [ actionplayercarrying | boxcarried ] -> [ actionplayercarrying | boxthrownleft ] againright [ actionplayercarrying | boxcarried ] -> [ actionplayercarrying | boxthrownright ] again[ boxthrown ] [ playercarrying ] -> [ boxthrown ] [ playeridle ]up [ boxthrownup | noblocker ] -> [ > boxthrownup |  ] againdown [ boxthrowndown | noblocker ] -> [ > boxthrowndown |  ] againleft [ boxthrownleft | noblocker ] -> [ > boxthrownleft |  ] againright [ boxthrownright | noblocker ] -> [ > boxthrownright |  ] againup [ boxthrownup | blocker ] -> [ boxidle | blocker ] againdown [ boxthrowndown | blocker ] -> [ boxidle | blocker ] againleft [ boxthrownleft | blocker ] -> [ boxidle | blocker ] againright [ boxthrownright | blocker ] -> [ boxidle | blocker ] again[ boxcarried ] [ playeridle ] -> [ boxcarried ] [ playercarrying ]

WINCONDITIONS

all target on box

LEVELS

#######
#pt..b#
#######

#########
#p..b..t#
#########

#######
#..####
#..####
#p...b#
##.####
##t####
#######

#######
#t.b.t#
#.....#
#b.p.b#
#.....#
#t.b.t#
#######

#######
#....p#
#.b#..#
#.#t..#
#t..#.#
#...b.#
#######

#########
####.####
###@.t###
##t...@##
#...p...#
##@...t##
###t.@###
####.####
#########
